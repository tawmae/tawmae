---
layout: default
title: "VERTICAL CHAT URL BUILDER | tawmae"
description: "A URL builder for the Vertical Chat widget"
---

<main>
  <h1>VERTICAL CHAT URL BUILDER</h1>

  <div class="copied-popup" id="copyMessage"></div>
  <div class="url-section">
    <input id="generatedUrl" readonly>
    <button class="copy-button" id="copyBtn">
      <span class="iconify" data-icon="material-symbols:content-copy-outline"></span>
      Copy
    </button>
  </div>

  <div class="builder-wrapper">
    <div class="builder-section">
      <h2>General Settings</h2>
      <div class="setting">
        <label for="hideAfter">Hide Messages After X Seconds</label>
        <input type="number" id="hideAfter" min="0">
        <div class="description">Hides messages after X seconds</div>
      </div>
      <div class="setting">
        <label>
          <input type="checkbox" id="excludeCommands">
          Exclude Commands
        </label>
        <div class="description">Hide messages that start with !</div>
      </div>
    </div>
    <div class="builder-section">
      <h2>Exclude Accounts</h2>
      <div class="description">Exclude accounts from showing in the chat.</div>
      <div class="exclude-accounts-input">
        <input
          type="text"
          id="excludeAccountInput"
          placeholder="Add account"
        >
        <button id="addExcludeAccountBtn">
          Add
        </button>
      </div>
      <div class="exclude-accounts-list" id="excludeAccountsList"></div>
    </div>
  </div>

  <script>
    console.log("Der JavaScript-Code wurde geladen!");

    let excludedAccounts = [];
    let defaultCopyBtnContent = `<span class="iconify" data-icon="material-symbols:content-copy-outline"></span> Copy`;
    let copiedCopyBtnContent = `<span class="iconify" data-icon="fluent:checkmark-12-regular"></span> Copied`;

    function buildURL() {
      const params = [];

      // Hide messages after X seconds
      const hideAfterVal = document.getElementById("hideAfter").value.trim();
      if (hideAfterVal) {
        params.push("hideAfter=" + encodeURIComponent(hideAfterVal));
      }

      // Exclude commands
      if (document.getElementById("excludeCommands").checked) {
        params.push("excludeCommands=true");
      }

      // Exclude Accounts
      if (excludedAccounts.length > 0) {
        params.push("excludeAccounts=" + excludedAccounts.join("+"));
      }

      const queryString = params.length > 0 ? "?" + params.join("&") : "";
      document.getElementById("generatedUrl").value =
        "https://tawmae.xyz/overlays/vertical-chat.html" + queryString;

      console.log("buildURL() -> " + document.getElementById("generatedUrl").value);
    }

    function updateAccountsUI() {
      const container = document.getElementById("excludeAccountsList");
      container.innerHTML = "";
      excludedAccounts.forEach(acc => {
        const span = document.createElement("span");
        span.textContent = acc + " ";
        
        const btn = document.createElement("button");
        btn.textContent = "x";
        btn.onclick = () => {
          excludedAccounts = excludedAccounts.filter(a => a !== acc);
          updateAccountsUI();
        };

        span.appendChild(btn);
        container.appendChild(span);
      });
      buildURL();
    }

    function init() {
      // Inputs beobachten
      const inputs = document.querySelectorAll("input");
      inputs.forEach(el => {
        el.addEventListener("input", buildURL);
        el.addEventListener("change", buildURL);
      });

      // Exclude Account hinzufÃ¼gen
      document.getElementById("addExcludeAccountBtn").onclick = () => {
        const val = document.getElementById("excludeAccountInput").value.trim();
        if (val) {
          excludedAccounts.push(val);
          document.getElementById("excludeAccountInput").value = "";
          updateAccountsUI();
        }
      };

      // Copy-Button
      const copyBtn = document.getElementById("copyBtn");
      const originalBg = copyBtn.style.background;
      const originalHTML = copyBtn.innerHTML;

      copyBtn.onclick = () => {
        const urlField = document.getElementById("generatedUrl");
        urlField.select();
        urlField.setSelectionRange(0, 99999);
        document.execCommand("copy");

        copyBtn.style.background = "lightgreen";
        copyBtn.innerHTML = copiedCopyBtnContent;

        setTimeout(() => {
          copyBtn.style.background = originalBg;
          copyBtn.innerHTML = originalHTML;
        }, 2500);
      };

      // Erste Initialisierung
      buildURL();
    }

    // Warten, bis der DOM fertig ist
    document.addEventListener("DOMContentLoaded", init);
  </script>
</main>
